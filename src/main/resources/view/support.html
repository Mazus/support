<!DOCTYPE html>
<html>
<head>
	<title>{{#i18n}}support.title{{/i18n}}</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<script src="{{#infra}}js/loader.js{{/infra}}" type="text/javascript"
		id="context"></script>
	<script src="/support/public/js/model.js" type="text/javascript"></script>
	<script src="/support/public/js/controller.js" type="text/javascript"></script>
	<script type="text/ng-template" id="empty"></script>
</head>
<body ng-controller="SupportController">
	<portal ng-if="!notFound">
		<div class="row">
				<div class="twelve cell">
					<div class="eight cell">
						<h1>
							<a ng-click="displayTicketList()"><i18n>support.title</i18n></a>
						</h1>
					</div>
					<div class="contextual-buttons four cell" ng-if="!isCreatingOrEditing()">
						<button ng-click="newTicket()" workflow="support.createTicket" class="cell right-magnet">
							<i18n>support.ticket.create</i18n>
						</button>
						<button ng-click="editTicket()" ng-if="ticket && ticket.id" class="cell right-magnet">
							<i18n>support.ticket.edit</i18n>
						</button>
					</div>
				</div>
				<section >
					<container template="main"></container>
				</section>
		</div>
	</portal>
	
	<div ng-if="notFound">
		<div ng-if="!me.userId" class="centered container">
			<default-styles>
				<h1><a data-reload><i class="oops"></i><i18n>oops</i18n></a></h1>
				<article>
					<div class="row">
						<i18n>support.ticket.notfound.or.unauthorized</i18n>
					</div>
					<div class="row vertical-spacing-twice">
						<button onclick="history.go(-1)"><i18n>back</i18n></button>
					</div>
				</article>
			</default-styles>
		</div>
		
		<div ng-if="me.userId" class="centered container">
			<portal>
				<h1><a data-reload><i class="oops"></i><i18n>oops</i18n></a></h1>
				<article>
					<div class="row">
						<i18n>support.ticket.notfound.or.unauthorized</i18n>
					</div>
					<div class="row vertical-spacing-twice">
						<button onclick="history.go(-1)"><i18n>back</i18n></button>
					</div>
				</article>
			</portal>
		</div>
	</div>
	
</body>
</html>